/**
 * marionette.toolkit - A collection of opinionated Backbone.Marionette extensions for large scale application architecture.
 * @version v0.4.0
 * @link https://github.com/RoundingWellOS/marionette.toolkit
 * @license MIT
 */
"use strict";var _=require("underscore"),Backbone=require("backbone"),Marionette=require("backbone.marionette"),StateClass=require("marionette.toolkit.state-class"),Component=StateClass.extend({ViewClass:Marionette.ItemView,viewEventPrefix:"view",viewOptions:{},constructor:function(e,t){t=t||{},_.extend(this,_.pick(t,["viewEventPrefix","ViewClass","viewOptions","region"])),StateClass.call(this,t),this._setStateDefaults(e)},_shouldDestroy:!0,_setStateDefaults:function(e){this.setState(e,{silent:!0})},showIn:function(e,t){return this.region=e,this.show(t),this},show:function(e){if(this._isShown)throw new Marionette.Error({name:"ComponentShowError",message:"Component has already been shown in a region."});if(!this.region)throw new Marionette.Error({name:"ComponentRegionError",message:"Component has no defined region."});return this.triggerMethod("before:show"),this.renderView(e),this._isShown=!0,this.triggerMethod("show"),this.listenTo(this.region,"empty",this._destroy),this},_getViewClass:function(e){e=e||{};var t=this.getOption("ViewClass");if(t.prototype instanceof Backbone.View||t===Backbone.View)return t;if(_.isFunction(t))return t.call(this,e);throw new Marionette.Error({name:"InvalidViewClassError",message:'"ViewClass" must be a view class or a function that returns a view class'})},renderView:function(e){var t=this._getViewClass(e),i=this.mixinOptions(e),s=this.buildView(t,i);return this.currentView=s,this._proxyViewEvents(s),this.triggerMethod("before:render:view",s),this._shouldDestroy=!1,this.region.show(s),this._shouldDestroy=!0,this.triggerMethod("render:view",s),this},_proxyViewEvents:function(e){var t=this.getOption("viewEventPrefix");e.on("all",function(){var i=_.toArray(arguments),s=i[0];i[0]=t+":"+s,i.splice(1,0,e),this.triggerMethod.apply(this,i)},this)},mixinOptions:function(e){var t=_.result(this,"viewOptions");return _.extend({stateModel:this.getState()},t,e)},buildView:function(e,t){return new e(t)},_destroy:function(){this._shouldDestroy&&StateClass.prototype.destroy.apply(this,arguments)},_emptyRegion:function(e){this.region&&(this.stopListening(this.region,"empty"),this.region.empty(e))},destroy:function(e){this._emptyRegion(e),this._shouldDestroy=!0,this._destroy(e)}}),component=Component;module.exports=component;
//# sourceMappingURL=Component.min.js.map